From f080cf4b0e103f628fee561528bccae82e2844aa Mon Sep 17 00:00:00 2001
From: Kai-Zhen Li <kli@mozilla.com>
Date: Wed, 29 Oct 2014 16:56:59 +0800
Subject: [PATCH 05/13] Fix netwerk/protocol/rtsp compile error.

---
 netwerk/protocol/rtsp/RtspChannelChild.h                | 2 +-
 netwerk/protocol/rtsp/RtspChannelParent.h               | 2 +-
 netwerk/protocol/rtsp/RtspHandler.h                     | 3 ++-
 netwerk/protocol/rtsp/controller/RtspController.h       | 2 +-
 netwerk/protocol/rtsp/controller/RtspControllerChild.h  | 2 +-
 netwerk/protocol/rtsp/controller/RtspControllerParent.h | 2 +-
 netwerk/protocol/rtsp/controller/RtspMetaData.h         | 2 +-
 7 files changed, 8 insertions(+), 7 deletions(-)

diff --git a/netwerk/protocol/rtsp/RtspChannelChild.h b/netwerk/protocol/rtsp/RtspChannelChild.h
index 279979c..1388213 100644
--- a/netwerk/protocol/rtsp/RtspChannelChild.h
+++ b/netwerk/protocol/rtsp/RtspChannelChild.h
@@ -37,7 +37,6 @@ public:
   NS_DECL_NSICHILDCHANNEL
 
   RtspChannelChild(nsIURI *aUri);
-  ~RtspChannelChild();
 
   // nsBaseChannel::nsIChannel
   NS_IMETHOD GetContentType(nsACString & aContentType) MOZ_OVERRIDE MOZ_FINAL;
@@ -79,6 +78,7 @@ public:
 private:
   bool mIPCOpen;
   bool mCanceled;
+  ~RtspChannelChild();
   nsCOMPtr<nsIStreamingProtocolController> mMediaStreamController;
 };
 
diff --git a/netwerk/protocol/rtsp/RtspChannelParent.h b/netwerk/protocol/rtsp/RtspChannelParent.h
index 9ae6fc7..154515f 100644
--- a/netwerk/protocol/rtsp/RtspChannelParent.h
+++ b/netwerk/protocol/rtsp/RtspChannelParent.h
@@ -34,7 +34,6 @@ public:
   NS_DECL_NSIPARENTCHANNEL
 
   RtspChannelParent(nsIURI *aUri);
-  ~RtspChannelParent();
 
   // nsBaseChannel::nsIChannel
   NS_IMETHOD GetContentType(nsACString & aContentType) MOZ_OVERRIDE MOZ_FINAL;
@@ -75,6 +74,7 @@ protected:
 
 private:
   bool mIPCClosed;
+  ~RtspChannelParent();
   virtual void ActorDestroy(ActorDestroyReason why) MOZ_OVERRIDE;
 };
 
diff --git a/netwerk/protocol/rtsp/RtspHandler.h b/netwerk/protocol/rtsp/RtspHandler.h
index fb6ecc4..a2aea61 100644
--- a/netwerk/protocol/rtsp/RtspHandler.h
+++ b/netwerk/protocol/rtsp/RtspHandler.h
@@ -22,8 +22,9 @@ class RtspHandler : public nsIProtocolHandler
   NS_DECL_NSIPROTOCOLHANDLER
 
   RtspHandler() { }
-  ~RtspHandler() { }
   const static int32_t kDefaultRtspPort = 554;
+private:  
+  ~RtspHandler() { }
 };
 
 } // namespace net
diff --git a/netwerk/protocol/rtsp/controller/RtspController.h b/netwerk/protocol/rtsp/controller/RtspController.h
index f938430..8985e6c8 100644
--- a/netwerk/protocol/rtsp/controller/RtspController.h
+++ b/netwerk/protocol/rtsp/controller/RtspController.h
@@ -25,7 +25,6 @@ public:
   NS_DECL_NSISTREAMINGPROTOCOLLISTENER
 
   RtspController(nsIChannel *channel);
-  ~RtspController();
 
 private:
   enum State {
@@ -34,6 +33,7 @@ private:
     DISCONNECTED
   };
 
+  ~RtspController();
   // RTSP URL refer to a stream or an aggregate of streams.
   nsCOMPtr<nsIURI> mURI;
   // The nsIStreamingProtocolListener implementation.
diff --git a/netwerk/protocol/rtsp/controller/RtspControllerChild.h b/netwerk/protocol/rtsp/controller/RtspControllerChild.h
index febae6a..0567ea9 100644
--- a/netwerk/protocol/rtsp/controller/RtspControllerChild.h
+++ b/netwerk/protocol/rtsp/controller/RtspControllerChild.h
@@ -30,7 +30,6 @@ class RtspControllerChild : public nsIStreamingProtocolController
   NS_DECL_NSISTREAMINGPROTOCOLLISTENER
 
   RtspControllerChild(nsIChannel *channel);
-  ~RtspControllerChild();
 
   bool RecvOnConnected(const uint8_t& index,
                        const InfallibleTArray<RtspMetadataParam>& meta);
@@ -60,6 +59,7 @@ class RtspControllerChild : public nsIStreamingProtocolController
 
  private:
   bool mIPCOpen;
+  ~RtspControllerChild();
   // The intention of this variable is just to avoid any IPC message to be sent
   // when this flag is set as false. Nothing more.
   bool mIPCAllowed;
diff --git a/netwerk/protocol/rtsp/controller/RtspControllerParent.h b/netwerk/protocol/rtsp/controller/RtspControllerParent.h
index c96678b..95ec1c7 100644
--- a/netwerk/protocol/rtsp/controller/RtspControllerParent.h
+++ b/netwerk/protocol/rtsp/controller/RtspControllerParent.h
@@ -28,7 +28,6 @@ class RtspControllerParent : public PRtspControllerParent
   NS_DECL_NSISTREAMINGPROTOCOLLISTENER
 
   RtspControllerParent();
-  ~RtspControllerParent();
 
   bool RecvAsyncOpen(const URIParams& aURI);
   bool RecvPlay();
@@ -42,6 +41,7 @@ class RtspControllerParent : public PRtspControllerParent
  private:
   bool mIPCOpen;
   void ActorDestroy(ActorDestroyReason why);
+  ~RtspControllerParent();
   // RTSP URL refer to a stream or an aggregate of streams.
   nsCOMPtr<nsIURI> mURI;
   // The nsIStreamingProtocolController implementation.
diff --git a/netwerk/protocol/rtsp/controller/RtspMetaData.h b/netwerk/protocol/rtsp/controller/RtspMetaData.h
index a1c9011..9e43dd5 100644
--- a/netwerk/protocol/rtsp/controller/RtspMetaData.h
+++ b/netwerk/protocol/rtsp/controller/RtspMetaData.h
@@ -22,7 +22,6 @@ class RtspMetaData : public nsIStreamingProtocolMetaData
   NS_DECL_NSISTREAMINGPROTOCOLMETADATA
 
   RtspMetaData();
-  ~RtspMetaData();
 
   nsresult DeserializeRtspMetaData(const InfallibleTArray<RtspMetadataParam>& metaArray);
 
@@ -36,6 +35,7 @@ class RtspMetaData : public nsIStreamingProtocolMetaData
   uint32_t  mSampleRate;
   uint64_t  mCurrentTimeStamp;
   uint32_t  mChannelCount;
+  ~RtspMetaData();
   nsCString mMimeType;
   nsCString mESDS;
   nsCString mAVCC;
-- 
1.9.1

